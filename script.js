var data = [
    {
        id: `a-algemene-broadcast`,
        nederlands: {
            titel: `Ga in de ALGEMENE TELEGRAM BROADCAST`,
            beschrijving: `Dat is <a href="https://t.me/+-1BG92MkKMk2ODc0">dit telegramkanaal</a> met de titel "Stop Sub #12".`,
            toelichting: `Voor veel acties, en ook voor deze <span class="a-12">A12-actie</span>, is er een grote <em>signal of telegram-groep</em> waar belangrijke mededelingen worden gepost.`,
        },
        engels: {
            titel: `Join the GENERAL TELEGRAM BROADCAST`,
            beschrijving: `It's <a href="https://t.me/+-1BG92MkKMk2ODc0">this telegram group</a> with the title "Stop Sub #12".`,
            toelichting: `For most actions, there is a big broadcast channel where important announcement are made. Always join them, and read the information carefully.`,
        }
    },
    {
        id: `a-vingergroep`,
        nederlands: {
            titel: `Zorg ervoor dat je in een VINGER signaalgroep zit`,
            beschrijving: `Dat is de signal groep waar je als het goed is al in zit. Zo niet, neem dan contact op met Stardust!`,
            toelichting: `Bij grote acties wordt er soms gewerkt met 'vingers': dat zijn groepen die samen voorbereiden en naar de actielocatie lopen. Dit vergroot de veiligheid en de kans dat zo veel mogelijk rebellen op de actie aankomen.`,
        },
        engels: {
            titel: `Make sure to be in a FINGER signal group`,
            beschrijving: `It is the signal-group that you probably are in already. If not, please contact Stardust!`,
            toelichting: `Larger actions sometimes use 'fingers'. These are groups that prepare for the action together and move towards the place of action together. This increases security and our chances of success.`,
        }
    },
    {
        id: `a-welzijntraining`,
        nederlands: {
            titel: `Volg een WELZIJN TRAINING`,
            beschrijving: `Als je dat al eerder hebt gedaan, hoeft dat niet nogmaals. Als u er geen kunt volgen, doe dan donderdag na de briefing mee aan de spoedcursus welzijn.`,
            toelichting: `U kunt ook de dia's van dit document doornemen (bekijk de aantekeningen van de spreker) om de belangrijkste informatie te krijgen: https://xrb.link/ez8Ht2Qu.`,
        },
        engels: {
            titel: `Do a wellbeing TRAINING`,
            beschrijving: `If you've done one before, you don't need to do it again. In case you cannot follow one join the wellbeing crash course this Thursday right after the briefing.`,
            toelichting: `You can also read go through the slides (check the speaker notes) of this document to get the most important information : https://xrb.link/ez8Ht2Qu.`,
        }
    },
    {
        id: `a-groen-hesje`,
        nederlands: {
            titel: `Haal en breng een GROEN HESJE`,
            beschrijving: `Als je een groen vest hebt, of iemand kent die je eigen vest mee kan nemen (misschien even checken), geweldig! Zo niet, dan neemt Dandelion contact met je op. Maak per vinger plannen wie de vesten kan krijgen en van waar`,
            toelichting: `Als je er geen hebt en er is nog geen contact met je opgenomen, stuur dan een bericht naar Dandelion +33 6 37 66 33 23 om iets te regelen.`,
        },
        engels: {
            titel: `Get and bring a GREEN VEST`,
            beschrijving: `If you have a green vest, or know someone that can bring you own (maybe double check with them), great! If not, Dandelion will contact you about it. Make plans per finger of who can get the vests and from where`,
            toelichting: `If you don't have one and haven't been contacted yet, please send a message to Dandelion +33 6 37 66 33 23 to arrange something`,
        }
    },
    {
        id: `a-presenteer-jezelf`,
        nederlands: {
            titel: `Presenteer jezelf als welzijn in je vinger`,
            beschrijving: `Schrijf een korte boodschap om jezelf voor te stellen zodat de rest van je vinger weet wie de welzijnsrebellen in hun vingers zijn. `,
            toelichting: `Er is een voorbeeld dat werd gedeeld in het welzijn Telegram dat je kunt gebruiken. Als je wilt, kun je ook rebellen die zich gestrest voelen voor de actie aanbieden om een praatje met ze te maken (werkt als je zelf een beetje ervaren bent).`,
        },
        engels: {
            titel: `Present yourself as wellbeing in your finger`,
            beschrijving: `Write a short message to present yourself so the rest of your finger knows who the wellbeing rebels in their fingers are.`,
            toelichting: `There is an example that was shared in the wellbeing Telegram that you can use. If you want to, you can also offer rebels who feel stressed before the action to have a chat with them (works if you are yourself a bit experienced).`,
        }
    },
    {
        id: `a-algemene-briefing`,
        nederlands: {
            titel: `Volg de ALGEMENE BRIEFING`,
            beschrijving: `Dit is een online zoom-meeting en duurt een uur.<br/>Engels: di 23 mei 20:30. Nederlands: wo 24 mei 20:30. Een zoom-link volgt op de dag zelf, via de <em>algemene broadcast</em>.`,
            toelichting: `De algemene briefing geeft een laatste update en herhaalt de belangrijkste punten. Het is een zoom-meeting met honderden deelnemers, dus er is niet veel ruimte voor vragen.`,
        },
        engels: {
            titel: `Follow the GENERAL BRIEFINGS`,
            beschrijving: `There will be a general zoom-meeting which will take about an hour.<br/><b>The English briefing is 23rd of may at 20:30</b>.<br/>A zoom link will be shared in the broadcast channel`,
            toelichting: `The general briefing provides the most recent updates and repeats the most import points. It's huge zoom meeting, so there's not a lot of time for questions. If you have remaining questions, you can always ask them in your finger group.`,
        }
    },
    {
        id: `a-vingerbriefing`,
        nederlands: {
            titel: `Volg de VINGERBRIEFING`,
            beschrijving: `In de signal groep van je vinger wordt er gedeeld of er ook nog een aparte vinger briefing zal worden gehouden. Houd de groep in de gaten en doe hieraan mee!`,
            toelichting: `In deze briefing bespreken we het plan voor onze vinger, waaronder de verzamellocatie en aanlooproute. Bovendien is er tijd voor vragen, en kunnen er nog buddies gemaakt worden.`,
        },
        engels: {
            titel: `Join the FINGER BRIEFING`,
            beschrijving: `In the signal group of your finger, the date and time of the finger briefing will be shared. Please join this briefing for your specific meeting location and more information.`,
            toelichting: `In this briefing more specific information about your finger and where to meet will be shared. Also, this is place to get a buddy for the action and there is time for questions`,
        }
    },
    {
        id: `a-rst-nummer`,
        nederlands: {
            titel: `Trek een RST-NUMMER`,
            beschrijving: `Er wordt nog een link gepost waar je een nummer kan trekken. Dat nummer is jouw arrestanten-nummer of RST ("arrestee")-nummer. Doe dit altijd, ook als je low-risk gaat.`,
            toelichting: `Het RST-nummmer dat je hebt getrokken moet je in het RST formulier invullen. Trek maar 1 keer een nummer en onthoud deze goed!`,
        },
        engels: {
            titel: `Get and RST-NUMBER`,
            beschrijving: `A link will be shared where you can get an RST-NUMBER. This is your individual arrestee number, remember it carefully and use it in the RST form. Always get one, also if you're low-risk.`,
            toelichting: `The RST number is used to connect you anonymously to who you are. Only RST support knows who is associated with what number, and will delete this information afterwards. `,
        }
    },
        {
        id: `a-rst-form`,
        nederlands: {
            titel: `Vul het RST formulier in!`,
            beschrijving: `In de algemene briefing zal er een link worden gedeeld met het arrestanten-formulier. Vul deze zo snel mogelijk in! Deze informatie wordt ook gebruikt om je helpen en te zorgen dat iedereen veilig blijft`,
            toelichting: `Je RST-nummer zorgt er voor dat arrestee-support jou kan traceren. Zo weten ze of er nog rebellen vast zitten. Achter de schermen werkt RST-support er hard aan om iedereen weer vrij te krijgen.`,
        },
        engels: {
            titel: `Fill in the RST-form!`,
            beschrijving: `In the general briefing and in the broadcast channel the RST form will be shared. Submit this form as soon as you can. This information is used to keep you secure and safe.`,
            toelichting: `The rst information is used to trace you during the action. In this way RST support knows if people are still being detained. RST support is working very hard to get you out and support you!`,
        }
    },
    {
        id: `a-tas-inpakken`,
        nederlands: {
            titel: `Pak je TAS in`,
            beschrijving: `Een paklijst wordt gedeeld tijdens de <em>algemene briefing</em>. <a href="https://cloud.extinctionrebellion.nl/index.php/s/q7aNEgnGcZyo52Q">Maar hier is een link naar een algemene paklijst.</a> `,
            toelichting: `Denk in elk geval aan: warme kleren, eten, drinken, geld, ID-kaart*, OV-kaart*. Géén dierbare bezittingen. Géén wapens, géén drugs.<br/>* niet als je anoniem gaat`,
        },
        engels: {
            titel: `Pack your BAG!`,
            beschrijving: `A packing list will be shared during the general briefing. <a href="https://cloud.extinctionrebellion.nl/index.php/s/q7aNEgnGcZyo52Q">Here is a link to the general packing list</a>`,
            toelichting: `Make sure you at least have enough warm clothing, food and water to support yourself for the day. Don't take any alcohol, drugs or things that are very precious to you.`,
        }
    },
    {
        id: `a-plan-treinreis`,
        nederlands: {
            titel: `Plan je (TREIN)REIS`,
            beschrijving: `Een reisadvies volgt.`,
            toelichting: `Houd rekening met eventuele vertragingen. Reis in kleine groepjes.`,
        },
        engels: {
            titel: `Plan your JOURNEY`,
            beschrijving: `Most fingers will share some travel advice`,
            toelichting: `Some delays might happen with public transport, take those into account! Try to travel in small groups.`,
        }
    },
    {
        id: `a-watervaste-stift`,
        nederlands: {
            titel: `Schrijf dit op je LICHAAM`,
            beschrijving: `Schrijf met <em>watervaste stift</em> twee dingen duidelijk op je lichaam:<br/>1. naam van de advocaat.<br/>2. Je RST-nummer.`,
            toelichting: `De naam van de advocaat wordt later bekendgemaakt.`,
        },
        engels: {
            titel: `Write this on your BODY`,
            beschrijving: `Use a permanent marker to write these two things on your body:<br/>1. Name of your lawyer.<br/>2. Your RST-Number`,
            toelichting: `The name of your laywer will be shared in your finger or on the RST-form`,
        }
    },
    {
        id: `a-zen`,
        nederlands: {
            titel: `Je bent er KLAAR voor!`,
            beschrijving: `Neem nog wat rust. Bedenk waarom je het ook alweer doet. We hebben een goed verhaal, we zijn met z'n duizenden. Misschien vind je het spannend. Maar het wordt ook heel gaaf.`,
            toelichting: `Tot snel :)`,
        },
        engels: {
            titel: `You are READY to go!`,
            beschrijving: `Take a deep breath, remember why you are doing this. We're doing this for an important cause, and we're getting more support everyday. Try to also have fun!`,
            toelichting: `We'll see you soon!`,
        }
    },
]

function start()
{
    let actiepunten = document.getElementById("actiepunten");

    actiepunten.innerHTML = ""; // bye

    let n = data.length;

    var e = document.getElementById("taalvoorkeur");
    var value = e.value;


    if (value == 'nederlands') {
        for (let i = 0; i < n; i++)
        {
            var html = template_actiepunt(data[i].id, data[i].nederlands.titel, data[i].nederlands.beschrijving, data[i].nederlands.toelichting);
            actiepunten.insertAdjacentHTML("beforeend", html);

            if (i != n-1)
            {
                actiepunten.insertAdjacentHTML("beforeend", template_pijl());
            }
        }
    } else {
        for (let i = 0; i < n; i++)
        {
            var html = template_actiepunt(data[i].id, data[i].engels.titel, data[i].engels.beschrijving, data[i].engels.toelichting);
            actiepunten.insertAdjacentHTML("beforeend", html);

            if (i != n-1)
            {
                actiepunten.insertAdjacentHTML("beforeend", template_pijl());
            }
        }
    }
}

function update()
{
    let items = document.getElementsByClassName("actiepunt");

    let is_visible = true;
    let i = 0;

    for (let item of items) {

        let is_checked = item.querySelector(".checkbox").checked;

        // Show or hide the element.
        if (is_visible)
        {
            item.classList.remove("hidden");
            item.getElementsByClassName("checkbox")[0].disabled = false;
            if (is_checked)
            {
                item.classList.add("done");
            }
            else
            {
                item.classList.remove("done");
            }
        }
        else
        {
            item.classList.add("hidden");
            item.getElementsByClassName("checkbox")[0].disabled = true;

            item.classList.remove("done");
        }

        // When we meet an unchecked item, disable visibility for all next items.

        // I've disabled this for now, so people can cross things off, non-sequential.
        // if (!is_checked)
        // {
        //     is_visible = false;
        // }

        i++;
    };
}

function clear()
{
    let items = document.getElementsByClassName("actiepunt");

    for (let item of items) {
        checkbox = item.querySelector(".checkbox");
        checkbox.checked = false;
    }
}

function reset()
{
    clear();
    save_to_cookies();

    start();
    update();

    document.documentElement.scrollTop = 0;
}

function save_to_cookies()
{
    let items = document.getElementsByClassName("actiepunt");

    for (let item of items) {
        checkbox = item.querySelector(".checkbox");
        let is_checked = checkbox.checked;

        set_cookie(String(checkbox.id), String(is_checked));
    }
}

function load_from_cookies()
{
    let items = document.getElementsByClassName("actiepunt");

    for (let item of items) {
        checkbox = item.querySelector(".checkbox");

        let v = get_cookie(checkbox.id);

        if (v == String(true))
        {
            checkbox.checked = true;
        }
        else
        {
            checkbox.checked = false;
        }
    }
}

// Simply copy-pasting this from w3schools:

function set_cookie(cname, cvalue) {
    let days = 40;
    const d = new Date();
    d.setTime(d.getTime() + (days*24*60*60*1000));
    let expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function get_cookie(cname) {
    let name = cname + "=";
    let decodedCookie = decodeURIComponent(document.cookie);
    let ca = decodedCookie.split(';');
    for(let i = 0; i <ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
}

function template_actiepunt(id, titel, beschrijving, toelichting)
{
    return `
        <div class="actiepunt" id=${id}>
            <div class="box">
            <p class="titel titelfont">${titel}</p>
            <p class="beschrijving">${beschrijving}</p>
            <div class="check">
                <input class="checkbox" type="checkbox" id="${id}" onchange="save_to_cookies(); update()">
                <label class="titelfont" for="${id}">Check</label>
            </div>
            </div>
            <div class="inklapbaar">
            <div class="box toevoeging">
                <p class="toelichting">${toelichting}</p>
            </div>
            </div>
        </div>`
}



function template_pijl()
{
    return `
        <img class="pijl" src="img/arrow_down_thin_120.png">`
}


window.addEventListener('load', function () {
    start();
    load_from_cookies();
    update();
  })
